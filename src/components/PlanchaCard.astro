---
interface Props {
    title: string;
    slug: string;
    grado: string;
    date: Date;
    tema: string;
    autor: string;
    orden: number;
}

const { title, slug, grado, date, tema, autor, orden } = Astro.props;

const formattedDate = date.toLocaleDateString('es-AR', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
});
---

<a
        href={`/planchas/${slug}`}
        class="plancha-card"
        data-title={title.toLowerCase()}
        data-tema={tema.toLowerCase()}
        data-grado={grado.toLowerCase()}
>
    <div class="card-inner">
        {/* NÃšMERO DECORATIVO DE FONDO */}
        <div class="card-numero-bg">{orden.toString().padStart(2, '0')}</div>

        {/* CONTENIDO PRINCIPAL */}
        <div class="card-content">
            {/* META: NÃºmero + Grado */}
            <div class="card-meta">
                <span class="card-numero">NÂº {orden.toString().padStart(2, '0')}</span>
                <span class="card-grado">{grado}</span>
            </div>

            {/* TÃTULO */}
            <h3 class="card-title">{title}</h3>

            {/* TEMA (SUBTÃTULO) */}
            {tema && <p class="card-tema">{tema}</p>}
        </div>

        {/* FOOTER: Metadata */}
        <div class="card-footer">
            <span class="card-fecha">ğŸ“… {formattedDate}</span>
            <span class="card-label">Plancha</span>
        </div>

        {/* OVERLAY HOVER */}
        <div class="card-overlay"></div>
    </div>
</a>

<style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CARD CONTAINER
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .plancha-card {
        display: block;
        text-decoration: none;
        color: inherit;
        transition: all var(--transition-smooth);
    }

    .plancha-card:focus-visible {
        outline: 2px solid var(--damero-gold-primary);
        outline-offset: 4px;
    }

    .card-inner {
        position: relative;
        background: var(--damero-dark);
        border: 1px solid var(--damero-line);
        border-radius: var(--radius-md);
        padding: 2rem;
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        height: 100%;
        overflow: hidden;
        transition: all var(--transition-smooth);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HOVER EFFECT
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .plancha-card:hover .card-inner {
        border-color: var(--damero-gold-primary);
        background: var(--damero-charcoal);
        box-shadow: 0 8px 24px rgba(212, 175, 55, 0.15);
    }

    .plancha-card:hover .card-overlay {
        opacity: 1;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       NÃšMERO DECORATIVO DE FONDO
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .card-numero-bg {
        position: absolute;
        top: -20px;
        right: -20px;
        font-size: 5rem;
        font-weight: var(--fw-bold);
        color: var(--damero-gray-dark);
        opacity: 0.04;
        letter-spacing: -0.05em;
        user-select: none;
        pointer-events: none;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       META: NÃºmero + Grado
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .card-meta {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
    }

    .card-numero {
        color: var(--damero-gray-light);
        font-weight: var(--fw-semibold);
    }

    .card-grado {
        border: 1px solid var(--damero-gold-primary);
        color: var(--damero-gold-primary);
        padding: 0.3rem 0.8rem;
        border-radius: var(--radius-xs);
        font-weight: var(--fw-semibold);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TITLE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .card-title {
        font-size: 1.3rem;
        font-weight: var(--fw-bold);
        font-family: var(--font-serif-header);
        line-height: 1.3;
        color: var(--damero-gold-primary);
        margin: 0;
        transition: color var(--transition-fast);
    }

    .plancha-card:hover .card-title {
        color: var(--damero-gold-accent);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TEMA (SUBTÃTULO)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .card-tema {
        color: var(--damero-gray-light);
        font-style: italic;
        font-size: 0.95rem;
        margin: 0;
        line-height: 1.6;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FOOTER
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .card-footer {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        margin-top: auto;
        padding-top: 1rem;
        border-top: 1px solid var(--damero-line);
        font-size: 0.8rem;
        color: var(--damero-gray-dark);
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .card-fecha {
        color: var(--damero-gray-light);
        font-size: 0.75rem;
    }

    .card-label {
        font-weight: var(--fw-semibold);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       OVERLAY HOVER
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .card-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, transparent 0%, rgba(212, 175, 55, 0.08) 100%);
        opacity: 0;
        transition: opacity var(--transition-smooth);
        pointer-events: none;
        border-radius: var(--radius-md);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESPONSIVE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    @media (max-width: 768px) {
        .card-inner {
            padding: 1.5rem;
            gap: 1rem;
        }

        .card-title {
            font-size: 1.15rem;
        }

        .card-tema {
            font-size: 0.9rem;
        }

        .card-numero-bg {
            font-size: 4rem;
            top: -15px;
            right: -15px;
        }
    }

    @media (max-width: 480px) {
        .card-inner {
            padding: 1.2rem;
            gap: 0.8rem;
        }

        .card-title {
            font-size: 1rem;
        }

        .card-tema {
            font-size: 0.85rem;
        }

        .card-numero-bg {
            font-size: 3rem;
        }
    }
</style>